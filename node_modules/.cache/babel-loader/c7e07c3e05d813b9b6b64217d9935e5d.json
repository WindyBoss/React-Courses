{"ast":null,"code":"var _jsxFileName = \"/Users/vitaliy/Documents/GitHub/React-Courses/src/pages/News.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState, useEffect } from 'react';\nimport { fetchArticles } from '../components/News/ApiService';\nimport { NewSearchFormClass, NewSearchFormHooks } from '../components/News/NewSearchForm';\nimport { Pending } from '../components/News/Pending';\nimport { Rejected } from '../components/News/Rejected';\nimport { Idle } from '../components/News/Idle';\nimport { Resolved } from '../components/News/Resolved';\nimport { NewsContainer } from '../components/News/News.styled.jsx';\nimport { useLocalStorage } from '../Hooks/useLocalStorage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved'\n};\n\nclass NewsClass extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      articles: [],\n      currentPage: 1,\n      searchQuery: '',\n      status: Status.IDLE\n    };\n    this.abortController = new AbortController();\n\n    this.onChangeQuery = query => {\n      this.setState({\n        searchQuery: query,\n        currentPage: 1,\n        articles: []\n      });\n    };\n\n    this.fetchData = async () => {\n      const {\n        currentPage,\n        searchQuery\n      } = this.state;\n      const options = {\n        searchQuery,\n        currentPage\n      };\n      this.setState({\n        status: Status.PENDING\n      });\n\n      try {\n        await fetchArticles(options, this.abortController).then(articles => {\n          this.setState(prevState => ({\n            articles: [...prevState.articles, ...articles],\n            currentPage: prevState.currentPage + 1,\n            status: Status.RESOLVED\n          }));\n        });\n      } catch (error) {\n        this.setState({\n          status: Status.REJECTED\n        });\n      }\n    };\n  }\n\n  componentDidUpdate(_, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchData();\n    }\n\n    ;\n  }\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  render() {\n    const {\n      articles,\n      status\n    } = this.state;\n    const shouldRenderLoadMoreButton = articles.length > 0 && status === 'resolved';\n    return /*#__PURE__*/_jsxDEV(NewsContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"News By Class\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), status === 'idle' && /*#__PURE__*/_jsxDEV(Idle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 31\n      }, this), status === 'rejected' && /*#__PURE__*/_jsxDEV(Rejected, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 35\n      }, this), /*#__PURE__*/_jsxDEV(NewSearchFormClass, {\n        onSubmit: this.onChangeQuery\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), status === 'resolved' && /*#__PURE__*/_jsxDEV(Resolved, {\n        articles: articles,\n        shouldRenderLoadMoreButton: shouldRenderLoadMoreButton,\n        onClick: this.fetchData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 35\n      }, this), status === 'pending' && /*#__PURE__*/_jsxDEV(Pending, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n; // console.log(`difference between || & ?? the same value in brackets, but different results (undefined XXX 1) ====> || = ${undefined || 1} && ?? = ${undefined ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (null XXX 1) ====> || = ${null || 1} && ?? = ${null ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (0 XXX 1) ====> || = ${0 || 1} && ?? = ${0 ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (false XXX true) ====> || = ${false || true} && ?? = ${false ?? true}`)\n\n/*\n* Let's add local storage to our app\n*/\n\nfunction NewsHooks() {\n  _s();\n\n  const [articles, setArticles] = useLocalStorage('articles', []);\n  const [currentPage, setCurrentPage] = useLocalStorage('currentPage', 1);\n  const [searchQuery, setSearchQuery] = useLocalStorage('searchQuery', '');\n  const [status, setStatus] = useState(Status.IDLE);\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    if (!searchQuery || searchQuery === '') {\n      return;\n    }\n\n    ;\n\n    function mergeArrayUnique(arr1, arr2) {\n      const reduced = arr1.filter(function (obj1) {\n        return !arr2.find(function (obj2) {\n          return obj1.url === obj2.url;\n        });\n      });\n      return reduced.concat(arr2);\n    }\n\n    ;\n    const numberedCurrentPage = Number(currentPage);\n    const options = {\n      searchQuery,\n      numberedCurrentPage\n    };\n    setStatus(Status.PENDING);\n\n    try {\n      fetchArticles(options, abortController).then(articles => {\n        setArticles(prevArticles => [...mergeArrayUnique(prevArticles, articles)]);\n        setStatus(Status.RESOLVED);\n      });\n    } catch (error) {\n      setStatus(Status.REJECTED);\n    }\n\n    ;\n    return () => {\n      abortController.abort();\n    };\n  }, [searchQuery, currentPage, setArticles]); // ! -------------------------------------------- LOCAL STORAGE ---------------------------------\n\n  useEffect(() => {\n    if (searchQuery !== '') {\n      window.localStorage.setItem('searchQuery', JSON.stringify(searchQuery));\n    }\n  }, [searchQuery]);\n  useEffect(() => {\n    if (currentPage !== 1) {\n      window.localStorage.setItem('currentPage', JSON.stringify(currentPage));\n    }\n\n    ;\n  }, [currentPage]);\n  useEffect(() => {\n    if (articles.length > 0) {\n      window.localStorage.setItem('articles', JSON.stringify(articles));\n    }\n  }, [articles]); // ! -------------------------------------------- LOCAL STORAGE ---------------------------------\n\n  const updatePage = () => {\n    setCurrentPage(prevPage => prevPage + 1);\n  };\n\n  const onChangeQuery = query => {\n    setSearchQuery(query);\n    setCurrentPage(1);\n    setArticles([]);\n  };\n\n  const shouldRenderLoadMoreButton = articles.length > 0 && status === 'resolved';\n  return /*#__PURE__*/_jsxDEV(NewsContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"News By Hooks\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this), status === 'idle' && /*#__PURE__*/_jsxDEV(Idle, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }, this), status === 'rejected' && /*#__PURE__*/_jsxDEV(Rejected, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(NewSearchFormHooks, {\n      onSubmit: onChangeQuery\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), status === 'resolved' && /*#__PURE__*/_jsxDEV(Resolved, {\n      articles: articles,\n      shouldRenderLoadMoreButton: shouldRenderLoadMoreButton,\n      onClick: updatePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 33\n    }, this), status === 'pending' && /*#__PURE__*/_jsxDEV(Pending, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 32\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 5\n  }, this);\n}\n\n_s(NewsHooks, \"P1VoF77+GVH+u80wfHGXZgS0fFw=\", false, function () {\n  return [useLocalStorage, useLocalStorage, useLocalStorage];\n});\n\n_c = NewsHooks;\n;\nexport function News() {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between'\n    },\n    children: [/*#__PURE__*/_jsxDEV(NewsClass, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(NewsHooks, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n}\n_c2 = News;\n;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"NewsHooks\");\n$RefreshReg$(_c2, \"News\");","map":{"version":3,"sources":["/Users/vitaliy/Documents/GitHub/React-Courses/src/pages/News.jsx"],"names":["React","Component","useState","useEffect","fetchArticles","NewSearchFormClass","NewSearchFormHooks","Pending","Rejected","Idle","Resolved","NewsContainer","useLocalStorage","Status","IDLE","PENDING","REJECTED","RESOLVED","NewsClass","state","articles","currentPage","searchQuery","status","abortController","AbortController","onChangeQuery","query","setState","fetchData","options","then","prevState","error","componentDidUpdate","_","componentWillUnmount","abort","render","shouldRenderLoadMoreButton","length","NewsHooks","setArticles","setCurrentPage","setSearchQuery","setStatus","mergeArrayUnique","arr1","arr2","reduced","filter","obj1","find","obj2","url","concat","numberedCurrentPage","Number","prevArticles","window","localStorage","setItem","JSON","stringify","updatePage","prevPage","News","display","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from 'react';\nimport { fetchArticles } from '../components/News/ApiService';\nimport { NewSearchFormClass, NewSearchFormHooks } from '../components/News/NewSearchForm';\n\nimport { Pending } from '../components/News/Pending';\nimport { Rejected } from '../components/News/Rejected';\nimport { Idle } from '../components/News/Idle';\nimport { Resolved } from '../components/News/Resolved';\nimport { NewsContainer } from '../components/News/News.styled.jsx';\n\nimport { useLocalStorage } from '../Hooks/useLocalStorage';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  REJECTED: 'rejected',\n  RESOLVED: 'resolved',\n};\n\nclass NewsClass extends Component {\n  state = {\n    articles: [],\n    currentPage: 1,\n    searchQuery: '',\n    status: Status.IDLE,\n  };\n\n  abortController = new AbortController();\n\n  componentDidUpdate(_, prevState) {\n    if(prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchData();\n    };\n  };\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      currentPage: 1,\n      articles: [],\n    });\n  };\n\n  componentWillUnmount() {\n    this.abortController.abort();\n  }\n\n  fetchData = async () => {\n    const { currentPage, searchQuery } = this.state;\n    const options = { searchQuery, currentPage };\n    this.setState({ status: Status.PENDING });\n    try {\n      await fetchArticles(options, this.abortController)\n      .then((articles) => {\n      this.setState(prevState => ({\n        articles: [...prevState.articles, ...articles],\n        currentPage: prevState.currentPage + 1,\n        status: Status.RESOLVED,\n      }));\n    })\n    } catch (error) {\n      this.setState({ status: Status.REJECTED })\n    }\n  };\n\n  render() {\n    const { articles, status } = this.state;\n    const shouldRenderLoadMoreButton = articles.length > 0 && status === 'resolved';\n\n    return (\n      <NewsContainer>\n        <h1>News By Class</h1>\n        {status === 'idle' && <Idle/>}\n        {status === 'rejected' && <Rejected/>}\n        <NewSearchFormClass onSubmit={this.onChangeQuery} />\n        {status === 'resolved' && <Resolved articles={articles} shouldRenderLoadMoreButton={shouldRenderLoadMoreButton} onClick={this.fetchData}/>}\n        {status === 'pending' && <Pending/>}\n      </NewsContainer>\n    );\n  };\n};\n\n// console.log(`difference between || & ?? the same value in brackets, but different results (undefined XXX 1) ====> || = ${undefined || 1} && ?? = ${undefined ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (null XXX 1) ====> || = ${null || 1} && ?? = ${null ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (0 XXX 1) ====> || = ${0 || 1} && ?? = ${0 ?? 1}`)\n// console.log(`difference between || & ?? the same value in brackets, but different results (false XXX true) ====> || = ${false || true} && ?? = ${false ?? true}`)\n\n/*\n* Let's add local storage to our app\n*/\n\nfunction NewsHooks() {\n  const [articles, setArticles] = useLocalStorage('articles', []);\n  const [currentPage, setCurrentPage] = useLocalStorage('currentPage', 1);\n  const [searchQuery, setSearchQuery] = useLocalStorage('searchQuery', '');\n  const [status, setStatus] = useState(Status.IDLE);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n\n    if (!searchQuery || searchQuery === '') {\n      return;\n    };\n\n    function mergeArrayUnique(arr1, arr2) {\n      const reduced = arr1.filter(function(obj1) {\n        return !arr2.find(function(obj2) {\n          return obj1.url === obj2.url;\n        });\n      });\n      return reduced.concat(arr2);\n    };\n\n    const numberedCurrentPage = Number(currentPage);\n    const options = { searchQuery, numberedCurrentPage };\n    setStatus(Status.PENDING);\n    try {\n      fetchArticles(options, abortController)\n        .then((articles) => {\n          setArticles(prevArticles => [...mergeArrayUnique(prevArticles, articles)]);\n          setStatus(Status.RESOLVED);\n         })\n    } catch (error) {\n      setStatus(Status.REJECTED);\n    };\n    return () => {\n      abortController.abort();\n    };\n  }, [searchQuery, currentPage, setArticles]);\n\n  // ! -------------------------------------------- LOCAL STORAGE ---------------------------------\n\n  useEffect(() => {\n    if (searchQuery !== '') {\n      window.localStorage.setItem('searchQuery', JSON.stringify(searchQuery));\n    }\n  }, [searchQuery]);\n\n\n  useEffect(() => {\n    if (currentPage !== 1) {\n      window.localStorage.setItem('currentPage', JSON.stringify(currentPage));\n    };\n  }, [currentPage]);\n\n\n  useEffect(() => {\n    if (articles.length > 0) {\n      window.localStorage.setItem('articles', JSON.stringify(articles));\n    }\n  }, [articles]);\n\n  // ! -------------------------------------------- LOCAL STORAGE ---------------------------------\n\n  const updatePage = () => {\n    setCurrentPage(prevPage => prevPage + 1);\n  };\n\n  const onChangeQuery = query => {\n    setSearchQuery(query);\n    setCurrentPage(1);\n    setArticles([]);\n  };\n\n  const shouldRenderLoadMoreButton = articles.length > 0 && status === 'resolved';\n\n  return (\n    <NewsContainer>\n      <h1>News By Hooks</h1>\n      {status === 'idle' && <Idle />}\n      {status === 'rejected' && <Rejected />}\n      <NewSearchFormHooks onSubmit={onChangeQuery} />\n      {status === 'resolved' && <Resolved articles={articles} shouldRenderLoadMoreButton={shouldRenderLoadMoreButton} onClick={updatePage} />}\n      {status === 'pending' && <Pending />}\n    </NewsContainer>\n  );\n};\n\nexport function News() {\n  return (\n    <div style={{display: 'flex', justifyContent: 'space-between'}}>\n      <NewsClass />\n      <NewsHooks />\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}