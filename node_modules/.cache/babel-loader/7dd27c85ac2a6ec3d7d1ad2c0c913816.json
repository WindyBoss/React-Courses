{"ast":null,"code":"import { createSlice } from '@reduxjs/toolkit';\nimport todos from 'data/todos.json';\nimport { addTodoPrepare } from './todoPrepareOnlyExample';\nexport const todoSlice = createSlice({\n  name: 'todos',\n  initialState: {\n    todos: [...todos],\n    filter: ''\n  },\n  reducers: {\n    addTodo: {\n      reducer(state, _ref) {\n        let {\n          payload\n        } = _ref;\n        state.todos.push(payload);\n      },\n\n      prepare(payload) {\n        return addTodoPrepare(payload);\n      }\n\n    },\n    deleteTodo: (state, _ref2) => {\n      let {\n        payload\n      } = _ref2;\n      return { ...state,\n        todos: [...state.todos.filter(_ref3 => {\n          let {\n            id\n          } = _ref3;\n          return id !== payload;\n        })]\n      };\n    },\n    toggleTodo: (state, _ref4) => {\n      let {\n        payload\n      } = _ref4;\n      return { ...state,\n        todos: [...state.todos.map(todo => todo.id === payload ? { ...todo,\n          completed: !todo.completed\n        } : todo)]\n      };\n    },\n    setFilter: (state, _ref5) => {\n      let {\n        payload\n      } = _ref5;\n      return { ...state,\n        filter: payload\n      };\n    }\n  }\n});\nexport const {\n  addTodo,\n  deleteTodo,\n  toggleTodo,\n  setFilter\n} = todoSlice.actions;\nexport default todoSlice.reducer;\n/*\n\n! ---------------------------------------------------------------- Notes ----------------------------------------------------------------------\n\n! ---------------------------------------------------------------- Redux ----------------------------------------------------------------------\n\n* Redux - library used for global state management in the case of high level of complication of global state.\n\n^ Main concept: Creation of global store - wrap of all application, which will collect all data and can provide it to all components.\nIs used usually when global state is complicated (like, theme, user data, and other data which, can be necessary in a lot of different components)\n\n& Main elements:\n1. Store,\n2. Reducers - functions, created for individual state update,\n3. Actions - user actions, presented as object with features type (name of action) & payload (the result of action),\n4. Store Provider - The same wrap as BrowserRouter\n5. connection with UI (hooks: [useSelector, useDispatch], components: [mapStateToProps, mapDispatchToProps, connect ])\n6. Slice - combo-function, which replace action and reducer\n\n! ---------------------------------------------------------------- Store ----------------------------------------------------------------------\n\n^ Created with functions createStore (vanilla Redux) or configureStore (Redux Toolkit).\n\n& Main elements of Store:\n1. Reducer - combination of all reducers (created by one of combineReducers functions)\n2. middleware - middleware function, which is used for additional configurations (for ex. logger - which shows all action in console)\n3. devTools - bool - param of store, responsible for presence of redux developer tools in browser\n4. preloadedState - store state before loading (some variable)\n5. enhancers - additional callback functions, which is called during state update\n\n? example:\nconst store = configureStore({\n    reducer: persistedReducer,\n    middleware: getDefaultMiddleware =>\n        getDefaultMiddleware({\n            serializableCheck: {\n                ^ ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER], -- the code force code to ignore actions, for mistake preventing\n            },\n        }).concat(logger),\n    ^ devTools: process.env.NODE_ENV !== 'production', -- the code command webpack not to add devTools to production mode\n    enhancers: defaultEnhancers => {\n        console.log(defaultEnhancers);\n        return defaultEnhancers;\n    },\n});\n\n! ---------------------------------------------------------------- Reducer ----------------------------------------------------------------------\n\nReducer - function for redux state update\n\nCreated with function createReducer.\n\nThere are 3 types of reducers structure:\n\n* Redux (usually made by switch)\n? Example:\nconst counter(state, action) {\n    if (typeof state === 'undefined') {\n      return 0\n    }\n    switch (action.type) {\n        case 'INCREMENT':\n            return state + 1\n        case 'DECREMENT':\n            return state - 1\n        default:\n            return state\n    }\n}\n\n* Redux Toolkit\n^ 1. builder\n? Example:\nexport const todoReducer = createReducer(initialState, builder => {\n    builder\n        .addCase(addTodo, (state, { payload }) => {\n            state.push(payload);\n        })\n});\n\n^ 2. inline actions\n? Example:\nexport const todoReducer = createReducer(initialState, {\n    [addTodo]: (state, { payload }) => {\n        state.push(payload);\n    },\n});\n\n! ---------------------------------------------------------------- Actions ----------------------------------------------------------------------\n\n\n* Redux\n& Actions are declared during the user activity and are written directly into the component\n\n* Redux Toolkit\n& Actions are defined in separate file by function * createAction *, where prepare function can be added (as in example)\n\n? Example  (prepared function)\nfunction addTodoPrepare(data) {\n  if (!data) {\n    return {\n      payload: {},\n    };\n  }\n\n  const { name, description, deadline, priority } = data;\n  return {\n    payload: {\n      name: name,\n      deadline: deadline,\n      description: description,\n      id: nanoid(),\n      completed: false,\n      priority: priority,\n    },\n  };\n}\n\nconst addTodo = createAction('todos/addTodo', addTodoPrepare);\n\n! ---------------------------------------------------------------- Slice ----------------------------------------------------------------------\n\n^ Slice is create by using function createSlice (only Toolkit)\n\n? Example\nexport const todoSlice = createSlice({\n    name: 'todos',\n    initialState: { todos: [...todos], filter: '' },\n    reducers: {\n        addTodo: {\n            reducer(state, { payload }) {\n                state.todos.push(payload);\n            },\n            & prepare(payload) { -- action prepare function\n                return addTodoPrepare(payload);\n            },\n        },\n        deleteTodo: (state, { payload }) => {\n            return {\n                ...state,\n                todos: [...state.todos.filter(({ id }) => id !== payload)],\n            };\n        },\n\n    },\n});\n\n? Example 2\nexport const counterSlice = createSlice({\n    name: 'counter',\n    initialState,\n    reducers: {\n        changeValue: (state, { payload }) => {\n            state.value += payload;\n        },\n    },\n});\n\n^ Slice Export (reducers & actions)\nexport const { changeValue } = counterSlice.actions;\nexport default counterSlice.reducer;\n\n! ---------------------------------------------------------------- Provider ----------------------------------------------------------------------\n\nProvider - Wrapper of whole application with store attribute, which gives access to store to all components\n\n! ---------------------------------------------------------------- localStorage ----------------------------------------------------------------------------\n\nWith redux toolkit it is better to use redux toolkit persist library, which guarantees that that code firstly will check localStorage,\nand later will initialize the store and application\n\n& https://github.com/ryanwillis/reduxjs-toolkit-persist\n^ npm install reduxjs-toolkit-persist\n\n* Necessary elements from persist library:\n1. persistStore\n2. persistReducer\n3. storage\n4. PersistGate - wrapper of all application\n\n? Example:\nimport { createStore } from '@reduxjs/toolkit'\nimport { persistStore, persistReducer } from 'reduxjs-toolkit-persist'\nimport storage from 'reduxjs-toolkit-persist/lib/storage' // defaults to localStorage for web\n\nimport rootReducer from './reducers'\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = configureStore({\n  ^ reducer: persistedReducer, - normal reducer must be replaced by persistedReducer\n  middleware: getDefaultMiddleware({\n    ^ serializableCheck: { - persist adds functions inside localStorage, which can cause mistakes in production mode\n      ^ ignoredActions: [ - it is better to add them as ignored by babble\n        FLUSH,\n        REHYDRATE,\n        PAUSE,\n        PERSIST,\n        PURGE,\n        REGISTER\n      ],\n    },\n  }),\n});\n\n! ---------------------------------------------------------------- Redux Toolkit --------------------------------------------------------------\n\nRedux Toolkit - bigger abstraction of redux where all redux magic is hidden in simplifier behind the code\n\n& Additional features:\n* createSlice\n* Immer - library, which allow mutating directly inside slices & reducers\n\n! ------------------------------------------------------------ action console log ------------------------------------------------------------\n\n& console.log(\n  addTodo({\n    deadline: 'tomorrow',\n    description: 'no',\n    name: 'no name',\n    priority: 'high',\n  })\n);\n\n* Always will the object with features 'type' & 'payload'\n\n--  Type - name of our action\n--  payload - the result of action\n\nIn this case was used action prepare function, which already possessed the features:\n1. id (generated by nanoid)\n2. completed: false (by default)\n\n{\n    \"type\": \"todos/addTodo\",\n    \"payload\": {\n        \"name\": \"no name\",\n        \"deadline\": \"tomorrow\",\n        \"description\": \"no\",\n        \"id\": \"1nUQuIsc0x91OmZWQixy3\",\n        \"completed\": false,\n        \"priority\": \"high\"\n    }\n}\n\n& toString() - action function, which return the name of action as string, which is used in reducer\nconsole.log(addTodo.toString()); -- 'todos/addTodo';\n\n? Example\n    [addTodo]: (state, { payload }) => {\n        state.push(payload);\n    },\n\n\n*/","map":{"version":3,"sources":["/Users/vitaliy/Documents/GitHub/React-Courses/src/redux/todos/todoSlice.js"],"names":["createSlice","todos","addTodoPrepare","todoSlice","name","initialState","filter","reducers","addTodo","reducer","state","payload","push","prepare","deleteTodo","id","toggleTodo","map","todo","completed","setFilter","actions"],"mappings":"AAAA,SAASA,WAAT,QAA4B,kBAA5B;AAEA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,SAASC,cAAT,QAA+B,0BAA/B;AAEA,OAAO,MAAMC,SAAS,GAAGH,WAAW,CAAC;AACjCI,EAAAA,IAAI,EAAE,OAD2B;AAEjCC,EAAAA,YAAY,EAAE;AAAEJ,IAAAA,KAAK,EAAE,CAAC,GAAGA,KAAJ,CAAT;AAAqBK,IAAAA,MAAM,EAAE;AAA7B,GAFmB;AAGjCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAE;AACLC,MAAAA,OAAO,CAACC,KAAD,QAAqB;AAAA,YAAb;AAAEC,UAAAA;AAAF,SAAa;AACxBD,QAAAA,KAAK,CAACT,KAAN,CAAYW,IAAZ,CAAiBD,OAAjB;AACH,OAHI;;AAILE,MAAAA,OAAO,CAACF,OAAD,EAAU;AACb,eAAOT,cAAc,CAACS,OAAD,CAArB;AACH;;AANI,KADH;AAUNG,IAAAA,UAAU,EAAE,CAACJ,KAAD,YAAwB;AAAA,UAAhB;AAAEC,QAAAA;AAAF,OAAgB;AAChC,aAAO,EACH,GAAGD,KADA;AAEHT,QAAAA,KAAK,EAAE,CAAC,GAAGS,KAAK,CAACT,KAAN,CAAYK,MAAZ,CAAmB;AAAA,cAAC;AAAES,YAAAA;AAAF,WAAD;AAAA,iBAAYA,EAAE,KAAKJ,OAAnB;AAAA,SAAnB,CAAJ;AAFJ,OAAP;AAIH,KAfK;AAiBNK,IAAAA,UAAU,EAAE,CAACN,KAAD,YAAwB;AAAA,UAAhB;AAAEC,QAAAA;AAAF,OAAgB;AAChC,aAAO,EACH,GAAGD,KADA;AAEHT,QAAAA,KAAK,EAAE,CACH,GAAGS,KAAK,CAACT,KAAN,CAAYgB,GAAZ,CAAgBC,IAAI,IACnBA,IAAI,CAACH,EAAL,KAAYJ,OAAZ,GAAsB,EAAC,GAAGO,IAAJ;AAAUC,UAAAA,SAAS,EAAE,CAACD,IAAI,CAACC;AAA3B,SAAtB,GAA+DD,IADhE,CADA;AAFJ,OAAP;AAQH,KA1BK;AA4BNE,IAAAA,SAAS,EAAE,CAACV,KAAD,YAAwB;AAAA,UAAhB;AAAEC,QAAAA;AAAF,OAAgB;AAC/B,aAAO,EACH,GAAGD,KADA;AAEHJ,QAAAA,MAAM,EAAEK;AAFL,OAAP;AAIH;AAjCK;AAHuB,CAAD,CAA7B;AAwCP,OAAO,MAAM;AAAEH,EAAAA,OAAF;AAAWM,EAAAA,UAAX;AAAuBE,EAAAA,UAAvB;AAAmCI,EAAAA;AAAnC,IAAiDjB,SAAS,CAACkB,OAAjE;AAEP,eAAelB,SAAS,CAACM,OAAzB;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\n\nimport todos from 'data/todos.json';\n\nimport { addTodoPrepare } from './todoPrepareOnlyExample';\n\nexport const todoSlice = createSlice({\n    name: 'todos',\n    initialState: { todos: [...todos], filter: '' },\n    reducers: {\n        addTodo: {\n            reducer(state, { payload }) {\n                state.todos.push(payload);\n            },\n            prepare(payload) {\n                return addTodoPrepare(payload);\n            },\n        },\n\n        deleteTodo: (state, { payload }) => {\n            return {\n                ...state,\n                todos: [...state.todos.filter(({ id }) => id !== payload)],\n            };\n        },\n\n        toggleTodo: (state, { payload }) => {\n            return {\n                ...state,\n                todos: [\n                    ...state.todos.map(todo =>\n                        todo.id === payload ? {...todo, completed: !todo.completed } : todo\n                    ),\n                ],\n            };\n        },\n\n        setFilter: (state, { payload }) => {\n            return {\n                ...state,\n                filter: payload\n            };\n        },\n    },\n});\n\nexport const { addTodo, deleteTodo, toggleTodo, setFilter } = todoSlice.actions;\n\nexport default todoSlice.reducer;\n\n\n\n\n/*\n\n! ---------------------------------------------------------------- Notes ----------------------------------------------------------------------\n\n! ---------------------------------------------------------------- Redux ----------------------------------------------------------------------\n\n* Redux - library used for global state management in the case of high level of complication of global state.\n\n^ Main concept: Creation of global store - wrap of all application, which will collect all data and can provide it to all components.\nIs used usually when global state is complicated (like, theme, user data, and other data which, can be necessary in a lot of different components)\n\n& Main elements:\n1. Store,\n2. Reducers - functions, created for individual state update,\n3. Actions - user actions, presented as object with features type (name of action) & payload (the result of action),\n4. Store Provider - The same wrap as BrowserRouter\n5. connection with UI (hooks: [useSelector, useDispatch], components: [mapStateToProps, mapDispatchToProps, connect ])\n6. Slice - combo-function, which replace action and reducer\n\n! ---------------------------------------------------------------- Store ----------------------------------------------------------------------\n\n^ Created with functions createStore (vanilla Redux) or configureStore (Redux Toolkit).\n\n& Main elements of Store:\n1. Reducer - combination of all reducers (created by one of combineReducers functions)\n2. middleware - middleware function, which is used for additional configurations (for ex. logger - which shows all action in console)\n3. devTools - bool - param of store, responsible for presence of redux developer tools in browser\n4. preloadedState - store state before loading (some variable)\n5. enhancers - additional callback functions, which is called during state update\n\n? example:\nconst store = configureStore({\n    reducer: persistedReducer,\n    middleware: getDefaultMiddleware =>\n        getDefaultMiddleware({\n            serializableCheck: {\n                ^ ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER], -- the code force code to ignore actions, for mistake preventing\n            },\n        }).concat(logger),\n    ^ devTools: process.env.NODE_ENV !== 'production', -- the code command webpack not to add devTools to production mode\n    enhancers: defaultEnhancers => {\n        console.log(defaultEnhancers);\n        return defaultEnhancers;\n    },\n});\n\n! ---------------------------------------------------------------- Reducer ----------------------------------------------------------------------\n\nReducer - function for redux state update\n\nCreated with function createReducer.\n\nThere are 3 types of reducers structure:\n\n* Redux (usually made by switch)\n? Example:\nconst counter(state, action) {\n    if (typeof state === 'undefined') {\n      return 0\n    }\n    switch (action.type) {\n        case 'INCREMENT':\n            return state + 1\n        case 'DECREMENT':\n            return state - 1\n        default:\n            return state\n    }\n}\n\n* Redux Toolkit\n^ 1. builder\n? Example:\nexport const todoReducer = createReducer(initialState, builder => {\n    builder\n        .addCase(addTodo, (state, { payload }) => {\n            state.push(payload);\n        })\n});\n\n^ 2. inline actions\n? Example:\nexport const todoReducer = createReducer(initialState, {\n    [addTodo]: (state, { payload }) => {\n        state.push(payload);\n    },\n});\n\n! ---------------------------------------------------------------- Actions ----------------------------------------------------------------------\n\n\n* Redux\n& Actions are declared during the user activity and are written directly into the component\n\n* Redux Toolkit\n& Actions are defined in separate file by function * createAction *, where prepare function can be added (as in example)\n\n? Example  (prepared function)\nfunction addTodoPrepare(data) {\n  if (!data) {\n    return {\n      payload: {},\n    };\n  }\n\n  const { name, description, deadline, priority } = data;\n  return {\n    payload: {\n      name: name,\n      deadline: deadline,\n      description: description,\n      id: nanoid(),\n      completed: false,\n      priority: priority,\n    },\n  };\n}\n\nconst addTodo = createAction('todos/addTodo', addTodoPrepare);\n\n! ---------------------------------------------------------------- Slice ----------------------------------------------------------------------\n\n^ Slice is create by using function createSlice (only Toolkit)\n\n? Example\nexport const todoSlice = createSlice({\n    name: 'todos',\n    initialState: { todos: [...todos], filter: '' },\n    reducers: {\n        addTodo: {\n            reducer(state, { payload }) {\n                state.todos.push(payload);\n            },\n            & prepare(payload) { -- action prepare function\n                return addTodoPrepare(payload);\n            },\n        },\n        deleteTodo: (state, { payload }) => {\n            return {\n                ...state,\n                todos: [...state.todos.filter(({ id }) => id !== payload)],\n            };\n        },\n\n    },\n});\n\n? Example 2\nexport const counterSlice = createSlice({\n    name: 'counter',\n    initialState,\n    reducers: {\n        changeValue: (state, { payload }) => {\n            state.value += payload;\n        },\n    },\n});\n\n^ Slice Export (reducers & actions)\nexport const { changeValue } = counterSlice.actions;\nexport default counterSlice.reducer;\n\n! ---------------------------------------------------------------- Provider ----------------------------------------------------------------------\n\nProvider - Wrapper of whole application with store attribute, which gives access to store to all components\n\n! ---------------------------------------------------------------- localStorage ----------------------------------------------------------------------------\n\nWith redux toolkit it is better to use redux toolkit persist library, which guarantees that that code firstly will check localStorage,\nand later will initialize the store and application\n\n& https://github.com/ryanwillis/reduxjs-toolkit-persist\n^ npm install reduxjs-toolkit-persist\n\n* Necessary elements from persist library:\n1. persistStore\n2. persistReducer\n3. storage\n4. PersistGate - wrapper of all application\n\n? Example:\nimport { createStore } from '@reduxjs/toolkit'\nimport { persistStore, persistReducer } from 'reduxjs-toolkit-persist'\nimport storage from 'reduxjs-toolkit-persist/lib/storage' // defaults to localStorage for web\n\nimport rootReducer from './reducers'\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport const store = configureStore({\n  ^ reducer: persistedReducer, - normal reducer must be replaced by persistedReducer\n  middleware: getDefaultMiddleware({\n    ^ serializableCheck: { - persist adds functions inside localStorage, which can cause mistakes in production mode\n      ^ ignoredActions: [ - it is better to add them as ignored by babble\n        FLUSH,\n        REHYDRATE,\n        PAUSE,\n        PERSIST,\n        PURGE,\n        REGISTER\n      ],\n    },\n  }),\n});\n\n! ---------------------------------------------------------------- Redux Toolkit --------------------------------------------------------------\n\nRedux Toolkit - bigger abstraction of redux where all redux magic is hidden in simplifier behind the code\n\n& Additional features:\n* createSlice\n* Immer - library, which allow mutating directly inside slices & reducers\n\n! ------------------------------------------------------------ action console log ------------------------------------------------------------\n\n& console.log(\n  addTodo({\n    deadline: 'tomorrow',\n    description: 'no',\n    name: 'no name',\n    priority: 'high',\n  })\n);\n\n* Always will the object with features 'type' & 'payload'\n\n--  Type - name of our action\n--  payload - the result of action\n\nIn this case was used action prepare function, which already possessed the features:\n1. id (generated by nanoid)\n2. completed: false (by default)\n\n{\n    \"type\": \"todos/addTodo\",\n    \"payload\": {\n        \"name\": \"no name\",\n        \"deadline\": \"tomorrow\",\n        \"description\": \"no\",\n        \"id\": \"1nUQuIsc0x91OmZWQixy3\",\n        \"completed\": false,\n        \"priority\": \"high\"\n    }\n}\n\n& toString() - action function, which return the name of action as string, which is used in reducer\nconsole.log(addTodo.toString()); -- 'todos/addTodo';\n\n? Example\n    [addTodo]: (state, { payload }) => {\n        state.push(payload);\n    },\n\n\n*/"]},"metadata":{},"sourceType":"module"}