{"ast":null,"code":"// * This apiService is build on the base of RTK Query - Redux Toolkit\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n/*\n? necessary elements:\n^ createApi\n^ fetchBaseQuery\n^ builder (query ot mutation)\n^ providesTags/invalidatesTags\n^ endpoint methods\n\n* The Main concept:\nRTK Query is the concept the API connect, where all logic is based inside createApi.\nIt is similar to axios lib, where you can add base url in baseQuery.\n\n^ Additionally is necessary to add reducerPath and !!! must match with the reducer name inside store\n^ tagTypes also must match with providesTags & invalidatesTags\n^ CreateApi creates the hook methods based on endPoints\n^ builder.query - used for fetch data (no changes) / builder.mutation - used for change data (push, patch, delete)\n\n& It is possible to transform the response with method \"transformResponse\"\n\n*/\n\nexport const todoApi = createApi({\n  reducerPath: 'todoList',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:3004'\n  }),\n  tagTypes: ['Todos'],\n  endpoints: builder => ({\n    getTodos: builder.query({\n      query: () => '/todos',\n      transformResponse: res => res.sort((a, b) => b.name - a.name),\n      providesTags: ['Todos']\n    }),\n    addTodo: builder.mutation({\n      query: todo => ({\n        url: '/todos',\n        method: 'POST',\n        body: { ...todo,\n          completed: false\n        }\n      }),\n      invalidatesTags: ['Todos']\n    }),\n    updateTodo: builder.mutation({\n      query: todo => ({\n        url: `/todos/${todo.id}`,\n        method: 'PATCH',\n        body: { ...todo,\n          completed: !todo.completed\n        }\n      }),\n      transformResponse: (response, meta, arg) => response,\n      invalidatesTags: ['Todos']\n    }),\n    getTodo: builder.query({\n      query: id => `/todos/${id}`\n    }),\n    deleteTodo: builder.mutation({\n      query: id => ({\n        url: `/todos/${id}`,\n        method: 'DELETE',\n        body: id\n      }),\n      transformResponse: response => response,\n      invalidatesTags: ['Todos']\n    })\n  })\n});\nexport default todoApi; // Hook endpoints methods\n\nexport const {\n  useGetTodosQuery,\n  useAddTodoMutation,\n  useUpdateTodoMutation,\n  useDeleteTodoMutation,\n  useGetTodoQuery\n} = todoApi;","map":{"version":3,"sources":["/Users/vitaliy/Documents/GitHub/React-Courses/src/service/apiService.js"],"names":["createApi","fetchBaseQuery","todoApi","reducerPath","baseQuery","baseUrl","tagTypes","endpoints","builder","getTodos","query","transformResponse","res","sort","a","b","name","providesTags","addTodo","mutation","todo","url","method","body","completed","invalidatesTags","updateTodo","id","response","meta","arg","getTodo","deleteTodo","useGetTodosQuery","useAddTodoMutation","useUpdateTodoMutation","useDeleteTodoMutation","useGetTodoQuery"],"mappings":"AAAA;AACA,SAASA,SAAT,EAAoBC,cAApB,QAA0C,8BAA1C;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMC,OAAO,GAAGF,SAAS,CAAC;AAC7BG,EAAAA,WAAW,EAAE,UADgB;AAE7BC,EAAAA,SAAS,EAAEH,cAAc,CAAC;AAAEI,IAAAA,OAAO,EAAE;AAAX,GAAD,CAFI;AAG7BC,EAAAA,QAAQ,EAAE,CAAC,OAAD,CAHmB;AAI7BC,EAAAA,SAAS,EAAEC,OAAO,KAAK;AACnBC,IAAAA,QAAQ,EAAED,OAAO,CAACE,KAAR,CAAc;AACpBA,MAAAA,KAAK,EAAE,MAAM,QADO;AAEpBC,MAAAA,iBAAiB,EAAEC,GAAG,IAAIA,GAAG,CAACC,IAAJ,CAAS,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,IAAF,GAASF,CAAC,CAACE,IAA9B,CAFN;AAGpBC,MAAAA,YAAY,EAAE,CAAC,OAAD;AAHM,KAAd,CADS;AAMnBC,IAAAA,OAAO,EAAEV,OAAO,CAACW,QAAR,CAAiB;AACtBT,MAAAA,KAAK,EAAEU,IAAI,KAAK;AACZC,QAAAA,GAAG,EAAE,QADO;AAEZC,QAAAA,MAAM,EAAE,MAFI;AAGZC,QAAAA,IAAI,EAAE,EAAC,GAAGH,IAAJ;AAAUI,UAAAA,SAAS,EAAE;AAArB;AAHM,OAAL,CADW;AAMtBC,MAAAA,eAAe,EAAE,CAAC,OAAD;AANK,KAAjB,CANU;AAcnBC,IAAAA,UAAU,EAAElB,OAAO,CAACW,QAAR,CAAiB;AACzBT,MAAAA,KAAK,EAAEU,IAAI,KAAK;AACZC,QAAAA,GAAG,EAAG,UAASD,IAAI,CAACO,EAAG,EADX;AAEZL,QAAAA,MAAM,EAAE,OAFI;AAGZC,QAAAA,IAAI,EAAE,EAAC,GAAGH,IAAJ;AAAUI,UAAAA,SAAS,EAAE,CAACJ,IAAI,CAACI;AAA3B;AAHM,OAAL,CADc;AAMzBb,MAAAA,iBAAiB,EAAE,CAACiB,QAAD,EAAWC,IAAX,EAAiBC,GAAjB,KAAyBF,QANnB;AAOzBH,MAAAA,eAAe,EAAE,CAAC,OAAD;AAPQ,KAAjB,CAdO;AAuBnBM,IAAAA,OAAO,EAAEvB,OAAO,CAACE,KAAR,CAAc;AACnBA,MAAAA,KAAK,EAAEiB,EAAE,IAAK,UAASA,EAAG;AADP,KAAd,CAvBU;AA0BnBK,IAAAA,UAAU,EAAExB,OAAO,CAACW,QAAR,CAAiB;AACzBT,MAAAA,KAAK,EAAEiB,EAAE,KAAK;AACVN,QAAAA,GAAG,EAAG,UAASM,EAAG,EADR;AAEVL,QAAAA,MAAM,EAAE,QAFE;AAGVC,QAAAA,IAAI,EAAEI;AAHI,OAAL,CADgB;AAMzBhB,MAAAA,iBAAiB,EAAEiB,QAAQ,IAAIA,QANN;AAOzBH,MAAAA,eAAe,EAAE,CAAC,OAAD;AAPQ,KAAjB;AA1BO,GAAL;AAJW,CAAD,CAAzB;AA0CP,eAAevB,OAAf,C,CAEA;;AACA,OAAO,MAAM;AACT+B,EAAAA,gBADS;AAETC,EAAAA,kBAFS;AAGTC,EAAAA,qBAHS;AAITC,EAAAA,qBAJS;AAKTC,EAAAA;AALS,IAMTnC,OANG","sourcesContent":["// * This apiService is build on the base of RTK Query - Redux Toolkit\nimport { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n\n\n/*\n? necessary elements:\n^ createApi\n^ fetchBaseQuery\n^ builder (query ot mutation)\n^ providesTags/invalidatesTags\n^ endpoint methods\n\n* The Main concept:\nRTK Query is the concept the API connect, where all logic is based inside createApi.\nIt is similar to axios lib, where you can add base url in baseQuery.\n\n^ Additionally is necessary to add reducerPath and !!! must match with the reducer name inside store\n^ tagTypes also must match with providesTags & invalidatesTags\n^ CreateApi creates the hook methods based on endPoints\n^ builder.query - used for fetch data (no changes) / builder.mutation - used for change data (push, patch, delete)\n\n& It is possible to transform the response with method \"transformResponse\"\n\n*/\nexport const todoApi = createApi({\n    reducerPath: 'todoList',\n    baseQuery: fetchBaseQuery({ baseUrl: 'http://localhost:3004' }),\n    tagTypes: ['Todos'],\n    endpoints: builder => ({\n        getTodos: builder.query({\n            query: () => '/todos',\n            transformResponse: res => res.sort((a, b) => b.name - a.name),\n            providesTags: ['Todos'],\n        }),\n        addTodo: builder.mutation({\n            query: todo => ({\n                url: '/todos',\n                method: 'POST',\n                body: {...todo, completed: false },\n            }),\n            invalidatesTags: ['Todos'],\n        }),\n        updateTodo: builder.mutation({\n            query: todo => ({\n                url: `/todos/${todo.id}`,\n                method: 'PATCH',\n                body: {...todo, completed: !todo.completed },\n            }),\n            transformResponse: (response, meta, arg) => response,\n            invalidatesTags: ['Todos'],\n        }),\n        getTodo: builder.query({\n            query: id => `/todos/${id}`,\n        }),\n        deleteTodo: builder.mutation({\n            query: id => ({\n                url: `/todos/${id}`,\n                method: 'DELETE',\n                body: id,\n            }),\n            transformResponse: response => response,\n            invalidatesTags: ['Todos'],\n        }),\n    }),\n});\n\nexport default todoApi;\n\n// Hook endpoints methods\nexport const {\n    useGetTodosQuery,\n    useAddTodoMutation,\n    useUpdateTodoMutation,\n    useDeleteTodoMutation,\n    useGetTodoQuery,\n} = todoApi;"]},"metadata":{},"sourceType":"module"}